{% extends 'base.html' %}

{% block content %}
    <h1>{{ title }}</h1>
    <small><a href="{% url 'user_detail' post.user.pk %}"> By: {{ post.user }} - {{ post.date }}</a></small>
    {% if user == post.user %}
        | <small><a href="{% url 'post_update' post.pk %}">(Редагувати)</a></small>
        | <small><a href="{% url 'post_delete' post.pk %}">(Видалити)</a></small>
        | <small><a href="{% url 'image_create' post.pk %}">(Додати зображення)</a></small>
        {% if post.image_set.all %}
            | <small><a href="{% url 'image_update' post.pk %}">(Керувати зображеннями)</a></small>
        {% endif %}
    {% endif %}

    <br/>
    <hr>
    {#    <div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel" style="width:50%">#}
    {#        <div class="carousel-inner">#}
    {#            {% for image in post.image_set.all %}#}
    {#                <div class="carousel-item active">#}
    {#                    <img src="{{ image.image.url }}" class="d-block w-100" alt="...">#}
    {#                </div>#}
    {#            {% endfor %}#}
    {#        </div>#}
    {#        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">#}
    {#            <span class="carousel-control-prev-icon" aria-hidden="true"></span>#}
    {#            <span class="sr-only">Previous</span>#}
    {#        </a>#}
    {#        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">#}
    {#            <span class="carousel-control-next-icon" aria-hidden="true"></span>#}
    {#            <span class="sr-only">Next</span>#}
    {#        </a>#}
    {#    </div>#}
    <div>
        {% for image in post.image_set.all %}
            <a href="{{ image.image.url }}"><img src="{{ image.image.url }}" align="left" height="100"></a>
        {% endfor %}
        <br/>
        {{ post.text }}
    </div>
    <br/><br/>
    <hr>

    <form method="POST">
        {% csrf_token %}
        {% if like_exists %}
            <button type="submit" name="post_pk" value="{{ post.pk }}" class="btn btn-primary bt-sm">like
                - {{ post.total_likes }}</button>
        {% else %}
            <button type="submit" name="post_pk" value="{{ post.pk }}" class="btn btn-outline-primary">like
                - {{ post.total_likes }}</button>
        {% endif %}
    </form>
    <br/><br/>
    <a href="{% url 'post_list' %}" class="btn btn-secondary">Назад</a>
{% endblock %}

{% block scripts %}
    {#    <script>#}
    {#        $(".like-form").submit(function (e) {#}
    {#            e.preventDefault()#}
    {##}
    {#            const post_id = $(this).attr('id')#}
    {##}
    {#            console.log(post_id)#}
    {#        })#}
    {#    </script>#}
{% endblock %}
